"use strict";(self.webpackChunkordspelet=self.webpackChunkordspelet||[]).push([[906],{4906:(pe,M,i)=>{i.r(M),i.d(M,{GameModule:()=>w});var l=i(6895),Z=i(655),$=i(7579),j=i(727),r=(i(2076),i(515),i(4650)),G=(i(5577),i(2722));const J=r.GuJ,N=Symbol("__destroy"),L=Symbol("__decoratorApplied");function P(o){return"string"==typeof o?Symbol(`__destroy__${o}`):N}function _(o,t){o[t]||(o[t]=new $.x)}function W(o,t){o[t]&&(o[t].next(),o[t].complete(),o[t]=null)}function T(o){o instanceof j.w0&&o.unsubscribe()}function U(o,t){return function(){if(o&&o.call(this),W(this,P()),t.arrayName&&function Y(o){Array.isArray(o)&&o.forEach(T)}(this[t.arrayName]),t.checkProperties)for(const e in this)t.blackList?.includes(e)||T(this[e])}}Symbol("CheckerHasBeenSet");var d=i(4004),h=i(1135),y=i(9841),te=i(8801);class p{constructor(t){this.store=t,this.wordsetId$=new h.X(null),this.wordset$=(0,y.a)([this.store.wordSets$,this.wordsetId$]).pipe((0,d.U)(([e,n])=>e.find(s=>s.id===n))),this.words$=this.wordset$.pipe((0,d.U)(e=>e?.words||[]))}static#e=this.\u0275fac=function(e){return new(e||p)(r.LFG(te.d))};static#t=this.\u0275prov=r.Yz7({token:p,factory:p.\u0275fac})}var C=i(6264);let b=class x{constructor(t,e){this.game=t,this.route=e,this.route.params.pipe((0,d.U)(n=>n.wordsetIndex||0),function ee(o,t){return e=>{const n=P(t);return"string"==typeof t?function q(o,t,e){const n=o[t];_(o,e),o[t]=function(){n.apply(this,arguments),W(this,e),o[t]=n}}(o,t,n):_(o,n),e.pipe((0,G.R)(o[n]))}}(this)).subscribe(n=>this.game.wordsetId$.next(n))}static#e=this.\u0275fac=function(e){return new(e||x)(r.Y36(p),r.Y36(C.gz))};static#t=this.\u0275cmp=r.Xpm({type:x,selectors:[["app-game"]],decls:1,vars:0,template:function(e,n){1&e&&r._UZ(0,"router-outlet")},dependencies:[C.lC]})};function A(o,t,e,n,s,a,u){try{var f=o[a](u),m=f.value}catch(de){return void e(de)}f.done?t(m):Promise.resolve(m).then(n,s)}b=(0,Z.gn)([function R(o={}){return t=>{!function H(o){return!!o[J]}(t)?function X(o,t){o.prototype.ngOnDestroy=U(o.prototype.ngOnDestroy,t)}(t,o):function z(o,t){const e=o.\u0275pipe;e.onDestroy=U(e.onDestroy,t)}(t,o),function Q(o){o.prototype[L]=!0}(t)}}()],b);const re=["*"];var c=(()=>{return(o=c||(c={})).Idle="idle",o.Hover="hover",o.Wrong="wrong",o.Correct="correct",c;var o})();class D{constructor(){this.state=c.Idle}static#e=this.\u0275fac=function(e){return new(e||D)};static#t=this.\u0275cmp=r.Xpm({type:D,selectors:[["app-word"]],inputs:{state:"state",bgcolor:"bgcolor",innerStyle:"innerStyle",innerClass:"innerClass"},ngContentSelectors:re,decls:2,vars:7,consts:[[3,"ngClass","ngStyle"]],template:function(e,n){1&e&&(r.F$t(),r.TgZ(0,"span",0),r.Hsn(1),r.qZA()),2&e&&(r.Gre("state-",n.state,""),r.Udp("background-color",n.bgcolor),r.Q6J("ngClass",n.innerClass)("ngStyle",n.innerStyle))},dependencies:[l.mk,l.PC],styles:["[_nghost-%COMP%] > span[_ngcontent-%COMP%]{display:block;position:relative;padding:.5em;color:var(--color-fg);background:var(--color-bg);background:white;border-radius:.5em;box-shadow:.1em .1em .25em var(--color-dark-op-10);border:.1em solid var(--color-fg-op-50);transition:.2s;transition-property:transform,box-shadow,background}[_nghost-%COMP%] > span.state-idle[_ngcontent-%COMP%], [_nghost-%COMP%] > span.state-hover[_ngcontent-%COMP%]{background:lightyellow}[_nghost-%COMP%] > span.state-hover[_ngcontent-%COMP%]{transform:scale(1.15)}[_nghost-%COMP%] > span.state-wrong[_ngcontent-%COMP%]{background:salmon!important;animation:.5s .2s _ngcontent-%COMP%_wrong ease-in-out 1}[_nghost-%COMP%] > span.state-correct[_ngcontent-%COMP%]{background:palegreen!important;animation:1.5s .1s _ngcontent-%COMP%_correct ease-in-out 1 forwards}@keyframes _ngcontent-%COMP%_wrong{0%,to{transform:translate(0)}15%,45%,75%{transform:translate(-.5em)}30%,60%,90%{transform:translate(.5em)}}@keyframes _ngcontent-%COMP%_correct{0%,10%,30%,50%{transform:scale(1)}20%,40%{transform:scale(1.15)}0%,80%{opacity:1}to{opacity:.5}}"]})}var O=i(2340);function ne(o,t){if(1&o){const e=r.EpF();r.TgZ(0,"div",5)(1,"app-word",6),r.NdJ("cdkDragDropped",function(s){r.CHM(e);const a=r.oxw(2);return r.KtG(a.onDragDrop(s))}),r._uU(2),r.qZA()()}if(2&o){const e=r.oxw().ngIf,n=r.oxw();r.xp6(1),r.Q6J("cdkDragData",e.currWord),r.xp6(1),r.hij(" ",n.formatWord(e.currWord,!0)," ")}}function se(o,t){if(1&o){const e=r.EpF();r.TgZ(0,"div",7),r.NdJ("cdkDropListEntered",function(s){r.CHM(e);const a=r.oxw(2);return r.KtG(a.onDragEnter(s))})("cdkDropListExited",function(){r.CHM(e);const s=r.oxw(2);return r.KtG(s.reset())}),r.TgZ(1,"app-word",8),r._uU(2),r.qZA()()}if(2&o){const e=t.$implicit,n=r.oxw().ngIf,s=r.oxw();r.Q6J("cdkDropListDisabled",e.done)("cdkDropListData",e),r.xp6(1),r.Q6J("state",s.wordState(e,n.hoveredWord,n.wrongWord)),r.xp6(1),r.hij(" ",s.formatWord(e.word,!1)," ")}}function ie(o,t){if(1&o&&(r.TgZ(0,"div",1)(1,"main",2),r.YNc(2,ne,3,2,"div",3),r.qZA(),r.TgZ(3,"aside"),r.YNc(4,se,3,4,"div",4),r.qZA()()),2&o){const e=t.ngIf,n=r.oxw();r.xp6(2),r.Q6J("ngIf",e.currWord),r.xp6(2),r.Q6J("ngForOf",e.wordsStatus)("ngForTrackBy",n.trackByWord)}}class v{constructor(t){this.game=t,this.wordsDone$=new h.X([]),this.wordsStatus$=(0,y.a)([this.game.words$,this.wordsDone$]).pipe((0,d.U)(([e,n])=>e.map(s=>({word:s,done:n.includes(s)})))),this.wordsLeft$=this.wordsStatus$.pipe((0,d.U)(e=>e.filter(n=>!n.done).map(n=>n.word))),this.currWord$=this.wordsLeft$.pipe((0,d.U)(e=>e[Math.floor(Math.random()*e.length)])),this.hoveredWord$=new h.X(void 0),this.wrongWord$=new h.X(void 0),this.$$=(0,y.a)([this.wordsStatus$,this.currWord$,this.hoveredWord$,this.wrongWord$]).pipe((0,d.U)(([e,n,s,a])=>({wordsStatus:e,currWord:n,hoveredWord:s,wrongWord:a})))}trackByWord(t,e){return e.word}formatWord(t,e){return t[e?"toLocaleUpperCase":"toLocaleLowerCase"]()}addWordDone(t){this.wordsDone$.next([...this.wordsDone$.value,t])}reset(){this.hoveredWord$.next(void 0),this.wrongWord$.next(void 0)}onDragDrop(t){var e=this;return function oe(o){return function(){var t=this,e=arguments;return new Promise(function(n,s){var a=o.apply(t,e);function u(m){A(a,n,s,u,f,"next",m)}function f(m){A(a,n,s,u,f,"throw",m)}u(void 0)})}}(function*(){t.item.data===t.container.data?.word?e.addWordDone(t.item.data):(e.reset(),e.wrongWord$.next(t.container.data?.word),clearTimeout(e._aniTimer),e._aniTimer=setTimeout(()=>e.reset(),1200))})()}onDragEnter(t){this.reset(),this.hoveredWord$.next(t.container.data.word)}wordState(t,e,n){return t.done?c.Correct:e===t.word?c.Hover:n===t.word?c.Wrong:c.Idle}static#e=this.\u0275fac=function(e){return new(e||v)(r.Y36(p))};static#t=this.\u0275cmp=r.Xpm({type:v,selectors:[["app-map-lower-upper-words"]],decls:2,vars:3,consts:[["cdkDropListGroup","","class","wrapper full-fill bg-op-5",4,"ngIf"],["cdkDropListGroup","",1,"wrapper","full-fill","bg-op-5"],["cdkDropList","",1,"flex-fill","flex-align-center","flex-justify-center"],["class","p-1",4,"ngIf"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListData","cdkDropListEntered","cdkDropListExited",4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-1"],["bgcolor","var(--color-primary-light-2)","innerClass","px-1 ts-120p","cdkDrag","",3,"cdkDragData","cdkDragDropped"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListData","cdkDropListEntered","cdkDropListExited"],[3,"state"]],template:function(e,n){1&e&&(r.YNc(0,ie,5,3,"div",0),r.ALo(1,"async")),2&e&&r.Q6J("ngIf",r.lcZ(1,1,n.$$))},dependencies:[l.sg,l.O5,O.Wj,O.Fd,O.Zt,D,l.Ov],styles:[".wrapper[_ngcontent-%COMP%]{display:grid;grid-template:auto/auto minmax(10em,30%);gap:1em}@media (orientation: portrait){.wrapper[_ngcontent-%COMP%]{grid-template:8em auto/auto}}.wrapper[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{padding:1em}.wrapper[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{display:grid;grid-template:auto/auto;align-items:center;overflow:auto;gap:.5em;padding:1em}@media (orientation: portrait){.wrapper[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{grid-template:auto/repeat(2,calc(50% - .25em))}}.cdk-drag-placeholder[_ngcontent-%COMP%]{display:none}"]})}var g=(()=>((g||(g={})).MapLowerUpperWords="map-lower-upper-words",g))(),ae=i(1929);const ce=[{path:":wordsetIndex",component:b,children:[{path:g.MapLowerUpperWords,component:v},{path:"**",redirectTo:g.MapLowerUpperWords}]}];class w{static#e=this.\u0275fac=function(e){return new(e||w)};static#t=this.\u0275mod=r.oAB({type:w});static#o=this.\u0275inj=r.cJS({providers:[p],imports:[l.ez,C.Bz.forChild(ce),ae.q]})}}}]);