"use strict";(self.webpackChunkordspelet=self.webpackChunkordspelet||[]).push([[889],{7889:(it,P,s)=>{s.r(P),s.d(P,{HomeModule:()=>M});var l=s(6895),p=s(4006),u=s(5072),v=s(4463),t=s(4650);class h{constructor(){this.longPress=new t.vpe,this.longPressEnd=new t.vpe,this.time=1e3,this._didSend=!1}onStart(n){clearTimeout(this._timer),this._timer=setTimeout(()=>{this.longPress.emit(n),this._didSend=!0},this.time)}onAbort(n){clearTimeout(this._timer),this._didSend&&this.longPressEnd.emit(n),this._didSend=!1}static#t=this.\u0275fac=function(e){return new(e||h)};static#e=this.\u0275dir=t.lG2({type:h,selectors:[["","longpress",""]],hostBindings:function(e,o){1&e&&t.NdJ("touchstart",function(r){return o.onStart(r)})("mousedown",function(r){return o.onStart(r)})("touchend",function(r){return o.onAbort(r)},!1,t.Jf7)("mouseup",function(r){return o.onAbort(r)},!1,t.Jf7)},inputs:{time:["longpressTime","time"]},outputs:{longPress:"longpress",longPressEnd:"longpressEnd"}})}class x{static#t=this.\u0275fac=function(e){return new(e||x)};static#e=this.\u0275mod=t.oAB({type:x});static#n=this.\u0275inj=t.cJS({})}var F=s(793),I=s(5861),T=s(1206),m=s(4004),H=s(9841),S=s(2313),R=s(2289);class f{constructor(n){this.breakpointObserver=n,this.orientationChanged$=this.breakpointObserver.observe(["(orientation: portrait)","(orientation: landscape)"]),this.isPortrait$=this.orientationChanged$.pipe((0,m.U)(()=>this.isPortrait())),this.isLandscape$=this.orientationChanged$.pipe((0,m.U)(()=>this.isLandscape()))}isPortrait(){return this.breakpointObserver.isMatched("(orientation: portrait)")}isLandscape(){return!this.isPortrait()}static#t=this.\u0275fac=function(e){return new(e||f)(t.LFG(R.Yg))};static#e=this.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}var W=s(3238),k=s(7392);function J(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"li")(1,"button",2),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.change.emit(r.id))}),t._UZ(2,"img",3),t.qZA()()}if(2&c){const e=n.$implicit,o=t.oxw();t.ekj("current",e.id===o.current),t.xp6(1),t.uIk("aria-label",e.text)("title",e.text),t.xp6(1),t.MGl("src","https://flagicons.lipis.dev/flags/4x3/",e.flag,".svg",t.LSH),t.Q6J("alt",e.text)}}class b{constructor(){this.change=new t.vpe,this.languages=[{id:"sv",flag:"se",text:"Svenska"},{id:"en",flag:"gb",text:"English"}]}static#t=this.\u0275fac=function(e){return new(e||b)};static#e=this.\u0275cmp=t.Xpm({type:b,selectors:[["app-language-selector"]],inputs:{current:"current"},outputs:{change:"change"},decls:2,vars:1,consts:[[1,"language-selector"],[3,"current",4,"ngFor","ngForOf"],[3,"click"],[3,"src","alt"]],template:function(e,o){1&e&&(t.TgZ(0,"ul",0),t.YNc(1,J,3,6,"li",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.languages))},dependencies:[l.sg],styles:["ul.language-selector[_ngcontent-%COMP%], ul.language-selector[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}ul.language-selector[_ngcontent-%COMP%]{padding:.25em}ul.language-selector[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{opacity:.5}ul.language-selector[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{opacity:.75}ul.language-selector[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]{opacity:1}ul.language-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1em;padding:.25em;margin:0;border:0;background:transparent;border:2px solid transparent;cursor:pointer}ul.language-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;height:1.5em}"]})}function U(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw().ngIf,d=t.oxw();return t.KtG(d.gotoLink(["/game",r.id,"new"],a.isEditMode))})("longpress",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.setEditMode(!0))})("longpressEnd",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.enableClick())}),t.TgZ(2,"b"),t._uU(3),t.qZA()(),t.TgZ(4,"a",9),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw().ngIf,d=t.oxw();return t.KtG(d.gotoLink(["edit",r.id],!a.isEditMode))}),t.TgZ(5,"mat-icon"),t._uU(6,"edit"),t.qZA()()()}if(2&c){const e=n.$implicit,o=n.index,i=t.oxw().ngIf;t.xp6(1),t.Udp("animation-delay",-o%4*.2+"s"),t.Q6J("matRippleDisabled",i.isEditMode),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.ekj("show",i.isEditMode)}}function $(c,n){if(1&c){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.NdJ("click",function(){const r=t.CHM(e).ngIf,a=t.oxw();return t.KtG(r.isEditMode&&a.setEditMode(!1))}),t.TgZ(2,"div",2),t.NdJ("cdkDropListDropped",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.onBoxSortDrop(i))}),t.TgZ(3,"div",3)(4,"div",4),t.NdJ("click",function(){const r=t.CHM(e).ngIf,a=t.oxw();return t.KtG(a.gotoLink("new",r.isEditMode))}),t.TgZ(5,"b"),t._uU(6,"+"),t.qZA()()(),t.YNc(7,U,7,6,"div",5),t.qZA()(),t.TgZ(8,"app-language-selector",6),t.NdJ("change",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.store.patch({language:i}))}),t.qZA(),t.BQk()}if(2&c){const e=n.ngIf,o=t.oxw();t.xp6(1),t.ekj("edit-mode",e.isEditMode)("disable-click",o.clickDisabled),t.xp6(1),t.Q6J("cdkDropListDisabled",!e.isEditMode)("cdkDropListData",e.wordSets)("cdkDropListOrientation",e.isPortrait?"vertical":"horizontal"),t.xp6(2),t.Q6J("matRippleDisabled",e.isEditMode),t.xp6(3),t.Q6J("ngForOf",e.wordSets),t.xp6(1),t.Q6J("current",e.language)}}class O{constructor(n,e,o,i,r){this.store=n,this.router=e,this.route=o,this.location=i,this.layout=r,this.wordsetsSorted$=this.store.wordSets$.pipe((0,m.U)(a=>[...a].reverse())),this.isEditMode$=this.route.queryParams.pipe((0,m.U)(a=>!!a.edit)),this.$$=(0,H.a)([this.wordsetsSorted$,this.store.language$,this.isEditMode$,this.layout.isPortrait$]).pipe((0,m.U)(([a,d,g,C])=>({wordSets:a,language:d,isEditMode:g,isPortrait:C}))),this.clickDisabled=!1}gotoLink(n,e){var o=this;return(0,I.Z)(function*(){e||("string"==typeof n&&(n=[n]),o.router.navigate(n,{relativeTo:o.route}))})()}setEditMode(n){n?this.router.navigate([],{queryParams:{edit:1}}):this.location.back(),this.clickDisabled=n}enableClick(){clearTimeout(this._enableClickTimer),this._enableClickTimer=setTimeout(()=>{this.clickDisabled=!1},100)}onBoxSortDrop(n){const e=[...n.container.data];(0,T.bA)(e,n.previousIndex,n.currentIndex),this.store.patch({wordSets:e.reverse()})}static#t=this.\u0275fac=function(e){return new(e||O)(t.Y36(S.d),t.Y36(u.F0),t.Y36(u.gz),t.Y36(l.Ye),t.Y36(f))};static#e=this.\u0275cmp=t.Xpm({type:O,selectors:[["app-home"]],decls:3,vars:3,consts:[[4,"ngIf"],[1,"wrapper","full-fill","overflow-auto","bg-op-5",3,"click"],["cdkDropList","",1,"box-list",3,"cdkDropListDisabled","cdkDropListData","cdkDropListOrientation","cdkDropListDropped"],[1,"box-wrapper"],["matRipple","",1,"box","new",3,"matRippleDisabled","click"],["class","box-wrapper","cdkDrag","",4,"ngFor","ngForOf"],[1,"ts-50p",3,"current","change"],["cdkDrag","",1,"box-wrapper"],["matRipple","",1,"box",3,"matRippleDisabled","click","longpress","longpressEnd"],[1,"edit","link",3,"click"]],template:function(e,o){1&e&&(t.YNc(0,$,9,10,"ng-container",0),t.ALo(1,"async"),t._UZ(2,"router-outlet")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.$$))},dependencies:[l.sg,l.O5,u.lC,T.Wj,T.Zt,W.wG,k.Hw,h,b,l.Ov],styles:[".wrapper[_ngcontent-%COMP%]{background:rgba(0,0,0,.1)}.wrapper.disable-click[_ngcontent-%COMP%]{pointer-events:none}.box-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;align-items:center;width:-moz-fit-content;width:fit-content;min-width:100%;padding:1em;position:absolute;top:50%;left:0;transform:translateY(-50%)}@media (orientation: portrait){.box-list[_ngcontent-%COMP%]{flex-direction:column;height:-moz-fit-content;height:fit-content;min-height:100%;top:0;left:50%;transform:translate(-50%)}}.box-wrapper[_ngcontent-%COMP%]{position:relative;width:min-content}.box-wrapper[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{position:absolute;bottom:.25em;left:.25em;height:1.5em;width:1.5em;display:flex;justify-content:center;align-items:center;border-radius:.25em;background:var(--color-fg);color:var(--color-bg);transform:scale(0);transition:transform .2s}.box-wrapper[_ngcontent-%COMP%]   .edit.show[_ngcontent-%COMP%]{transform:scale(1);cursor:pointer}.box[_ngcontent-%COMP%]{width:calc(25% - 2em);min-width:7em;background:white;border-radius:.5em;box-shadow:.1em .1em .25em var(--color-dark-op-10);border:.1em solid var(--color-fg-op-50);height:4em;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;margin:.5em;padding:.5em;text-decoration:none;transition:.2s;transition-property:transform,box-shadow;font-size:130%}@media (orientation: portrait){.box[_ngcontent-%COMP%]{font-size:110%}}.box[_ngcontent-%COMP%]:hover{background:white;border-radius:.5em;box-shadow:.1em .1em 1em var(--color-dark-op-25);border:.1em solid var(--color-fg);transform:scale(1.05) translateY(-.1em)}.box.new[_ngcontent-%COMP%]{background:var(--color-primary);color:var(--color-primary-contrast)}.box.new[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-size:300%}.edit-mode[_ngcontent-%COMP%]   .box.new[_ngcontent-%COMP%]{pointer-events:none}.wrapper.edit-mode[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_wobble .3s infinite linear;cursor:move}.wrapper.edit-mode[_ngcontent-%COMP%]   .box.new[_ngcontent-%COMP%]{animation:none}@keyframes _ngcontent-%COMP%_wobble{0%,50%,to{transform:rotate(0)}25%{transform:rotate(-3deg)}75%{transform:rotate(3deg)}}.cdk-drag-preview[_ngcontent-%COMP%]{transition:none}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}app-language-selector[_ngcontent-%COMP%]{position:absolute;top:0;left:0}"]})}var L=s(9521),N=s(8372),Z=s(9300),Y=s(3900),B=s(1881),G=s(9413),K=s(4425),Q=s(5806),y=s(4859),E=s(7676),j=s(4144),w=s(7331),z=s(6709);const V=function(c){return{word:c}};function X(c,n){if(1&c){const e=t.EpF();t.TgZ(0,"mat-chip-row",20),t.NdJ("removed",function(){const r=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.removeWord(r))}),t._uU(1),t.TgZ(2,"button",21),t.ALo(3,"translate"),t.TgZ(4,"mat-icon"),t._uU(5,"cancel"),t.qZA()()()}if(2&c){const e=n.$implicit;t.xp6(1),t.hij(" ",e," "),t.xp6(1),t.uIk("aria-label",t.xi3(3,2,"WORDSETFORM.LABELS.REMOVEWORD",t.VKq(5,V,e)))}}function q(c,n){if(1&c){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",5)(2,"mat-label",6),t._uU(3,"WORDSETFORM.LABELS.SHARE"),t.qZA(),t.TgZ(4,"input",22,23),t.NdJ("focus",function(){t.CHM(e);const i=t.MAs(5);return t.KtG(i.select())}),t.qZA(),t.TgZ(6,"button",24),t.NdJ("click",function(){const r=t.CHM(e).ngIf,a=t.oxw();return t.KtG(a.copyShareUrl(r))}),t.ALo(7,"translate"),t.TgZ(8,"mat-icon"),t._uU(9,"content_copy"),t.qZA()()(),t.BQk()}if(2&c){const e=n.ngIf;t.xp6(4),t.Q6J("value",e),t.xp6(2),t.uIk("aria-label",t.lcZ(7,2,"WORDSETFORM.LABELS.COPYSHARE"))}}function tt(c,n){1&c&&(t.TgZ(0,"mat-checkbox",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WORDSETFORM.LABELS.DELETEWORDSET")," "))}class _{constructor(n,e,o,i,r,a,d,g,C){this.fb=n,this.store=e,this.importService=o,this.route=i,this.router=r,this.location=a,this.translate=d,this.clipboard=g,this.snackbar=C,this.minWords=2,this.separatorKeysCodes=[L.K5,L.OC],this.form=this.fb.group({id:[""],title:["",p.kI.required],words:[[],et(this.minWords)],delete:[!1]}),this.shareUrl$=this.form.valueChanges.pipe((0,m.U)(D=>{const ot=!(!D.id||!this.form.valid),A={...D};return delete A.delete,ot?this.importService.getWordsetsImportUrl([A]):void 0})),this.trackEditIndex()}get isEditing(){const{id:n}=this.form.value||{};return!!n}trackEditIndex(){this.route.params.pipe((0,N.b)(1),(0,m.U)(n=>n?.id),(0,Z.h)(n=>!!n),(0,Y.w)(n=>this.store.wordSets$.pipe((0,m.U)(e=>e.find(o=>o.id==n)))),(0,Z.h)(n=>!!n)).subscribe(n=>{this.form.patchValue(n)})}addWord(n){const e=n.value?.trim()?.toLocaleLowerCase();if(e){const o=[...this.form.value.words||[]];o.push(e),this.form.patchValue({words:o}),n.chipInput.clear()}}removeWord(n){const e=(this.form.value.words||[]).filter(o=>o!==n);this.form.patchValue({words:e})}onSubmit(){const{id:n,title:e,words:o,delete:i}=this.form.value||{};if(!(e&&o&&o.length>=this.minWords))return;const a=[...this.store.data.wordSets],d={title:e,words:o,id:(0,B.B)()},g=a.findIndex(C=>C.id===n);this.isEditing&&n&&g>=0?i?a.splice(g,1):a[g]=d:a.push(d),this.store.patch({wordSets:a}),this.router.navigate(["../"])}copyShareUrl(n){this.clipboard.copy(n);const e=this.translate.instant("WORDSETFORM.LABELS.COPIEDSHARE"),o=this.snackbar.open(e);setTimeout(()=>o.dismiss(),1e3)}static#t=this.\u0275fac=function(e){return new(e||_)(t.Y36(p.qu),t.Y36(S.d),t.Y36(G.Y),t.Y36(u.gz),t.Y36(u.F0),t.Y36(l.Ye),t.Y36(v.sK),t.Y36(K.TU),t.Y36(Q.ux))};static#e=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-wordset-form"]],decls:32,vars:26,consts:[[1,"modal-wrapper"],[1,"modal-box","w-100",3,"formGroup","ngSubmit"],[1,"px-1","py-05"],[1,"ts-150p","flex-center","m-0"],[1,"modal-body","p-1"],["appearance","outline",1,"w-100","ts-120p"],["translate",""],["matInput","","formControlName","title","autofocus",""],["aria-label","WORDSETFORM.LABELS.ADDWORD"],["chipGrid",""],[3,"removed",4,"ngFor","ngForOf"],[1,"word-input",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[4,"ngIf"],["formControlName","delete","color","warn","class","ts-80p",4,"ngIf"],[1,"px-1","pb-05"],[1,"mt-0"],[1,"flex-center"],["type","submit","mat-raised-button","",1,"",3,"color","disabled"],[1,"text-upper"],[1,"modal-close",3,"click"],[3,"removed"],["matChipRemove",""],["matInput","","readonly","",1,"ts-50p",3,"value","focus"],["shareUrlInput",""],["type","button","mat-icon-button","","matSuffix","",3,"click"],["formControlName","delete","color","warn",1,"ts-80p"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(2,"div",2)(3,"h1",3),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div",4)(7,"mat-form-field",5)(8,"mat-label",6),t._uU(9,"WORDSETFORM.LABELS.TITLE"),t.qZA(),t._UZ(10,"input",7),t.qZA(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"mat-chip-grid",8,9),t.YNc(17,X,6,7,"mat-chip-row",10),t.TgZ(18,"input",11),t.NdJ("matChipInputTokenEnd",function(r){return o.addWord(r)}),t.ALo(19,"translate"),t.qZA()()(),t.YNc(20,q,10,4,"ng-container",12),t.ALo(21,"async"),t.YNc(22,tt,3,3,"mat-checkbox",13),t.qZA(),t.TgZ(23,"footer",14),t._UZ(24,"hr",15),t.TgZ(25,"div",16)(26,"button",17)(27,"strong",18),t._uU(28),t.ALo(29,"translate"),t.qZA()()()(),t.TgZ(30,"a",19),t.NdJ("click",function(){return o.location.back()}),t.ALo(31,"translate"),t.qZA()()()),2&e){const i=t.MAs(16);t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(3),t.hij(" ",t.lcZ(5,14,"WORDSETFORM.HEADLINE."+(o.isEditing?"EDIT":"NEW"))," "),t.xp6(9),t.hij(" ",t.lcZ(14,16,"WORDSETFORM.LABELS.WORDSTOLEARN"),"* "),t.xp6(4),t.Q6J("ngForOf",o.form.value.words),t.xp6(1),t.Q6J("placeholder",t.lcZ(19,18,"WORDSETFORM.LABELS.ADDWORD"))("matChipInputFor",i)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("matChipInputAddOnBlur",!0),t.xp6(2),t.Q6J("ngIf",t.lcZ(21,20,o.shareUrl$)),t.xp6(2),t.Q6J("ngIf",o.isEditing),t.xp6(4),t.Q6J("color",o.form.value.delete?"warn":"primary")("disabled",o.form.invalid),t.xp6(2),t.hij(" ",t.lcZ(29,22,"WORDSETFORM.BUTTON."+(o.form.value.delete?"DELETE":o.isEditing?"EDIT":"NEW"))," "),t.xp6(2),t.uIk("aria-label",t.lcZ(31,24,"COMMON.CLOSE"))}},dependencies:[l.sg,l.O5,y.lW,y.RK,E.KE,E.hX,E.R9,j.Nt,w.RA,w.oH,w.qH,w.z3,k.Hw,z.oG,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,v.Pi,l.Ov,v.X$],styles:["input.word-input[_ngcontent-%COMP%]{text-transform:lowercase}input.word-input[_ngcontent-%COMP%]::placeholder{text-transform:none}"]})}const et=c=>n=>n.value.length>=c?null:{MinLengthArray:!0},nt=[{path:"",component:O,children:[{path:"new",component:_},{path:"edit/:id",component:_}]}];class M{static#t=this.\u0275fac=function(e){return new(e||M)};static#e=this.\u0275mod=t.oAB({type:M});static#n=this.\u0275inj=t.cJS({imports:[l.ez,u.Bz.forChild(nt),F.q,p.UX,x,v.aw.forChild()]})}}}]);