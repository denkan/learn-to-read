"use strict";(self.webpackChunkordspelet=self.webpackChunkordspelet||[]).push([[78],{6078:(st,b,i)=>{i.r(b),i.d(b,{GameModule:()=>h});var l=i(6895),E=i(655),O=i(7579),_=i(727),o=(i(2076),i(515),i(4650)),A=(i(5577),i(2722));const j=o.GuJ,F=Symbol("__destroy"),k=Symbol("__decoratorApplied");function M(r){return"string"==typeof r?Symbol(`__destroy__${r}`):F}function $(r,e){r[e]||(r[e]=new O.x)}function L(r,e){r[e]&&(r[e].next(),r[e].complete(),r[e]=null)}function P(r){r instanceof _.w0&&r.unsubscribe()}function W(r,e){return function(){if(r&&r.call(this),L(this,M()),e.arrayName&&function J(r){Array.isArray(r)&&r.forEach(P)}(this[e.arrayName]),e.checkProperties)for(const t in this)e.blackList?.includes(t)||P(this[t])}}Symbol("CheckerHasBeenSet");var d=i(4004),m=i(1135),D=i(9841),K=i(8801);class p{constructor(e){this.store=e,this.wordsetId$=new m.X(null),this.wordset$=(0,D.a)([this.store.wordSets$,this.wordsetId$]).pipe((0,d.U)(([t,n])=>t.find(s=>s.id===n))),this.words$=this.wordset$.pipe((0,d.U)(t=>t?.words||[]))}static#t=this.\u0275fac=function(t){return new(t||p)(o.LFG(K.d))};static#e=this.\u0275prov=o.Yz7({token:p,factory:p.\u0275fac})}var v=i(6319);let w=class C{constructor(e,t){this.game=e,this.route=t,this.route.params.pipe((0,d.U)(n=>n.wordsetIndex||0),function R(r,e){return t=>{const n=M(e);return"string"==typeof e?function z(r,e,t){const n=r[e];$(r,t),r[e]=function(){n.apply(this,arguments),L(this,t),r[e]=n}}(r,e,n):$(r,n),t.pipe((0,A.R)(r[n]))}}(this)).subscribe(n=>this.game.wordsetId$.next(n))}static#t=this.\u0275fac=function(t){return new(t||C)(o.Y36(p),o.Y36(v.gz))};static#e=this.\u0275cmp=o.Xpm({type:C,selectors:[["app-game"]],decls:1,vars:0,template:function(t,n){1&t&&o._UZ(0,"router-outlet")},dependencies:[v.lC]})};w=(0,E.gn)([function Q(r={}){return e=>{!function B(r){return!!r[j]}(e)?function H(r,e){r.prototype.ngOnDestroy=W(r.prototype.ngOnDestroy,e)}(e,r):function N(r,e){const t=r.\u0275pipe;t.onDestroy=W(t.onDestroy,e)}(e,r),function G(r){r.prototype[k]=!0}(e)}}()],w);var V=i(5861);const q=["*"];var c=(()=>{return(r=c||(c={})).Idle="idle",r.Hover="hover",r.Wrong="wrong",r.Correct="correct",c;var r})();class g{constructor(){this.state=c.Idle}static#t=this.\u0275fac=function(t){return new(t||g)};static#e=this.\u0275cmp=o.Xpm({type:g,selectors:[["app-word"]],inputs:{state:"state",bgcolor:"bgcolor",innerStyle:"innerStyle",innerClass:"innerClass"},ngContentSelectors:q,decls:2,vars:7,consts:[[3,"ngClass","ngStyle"]],template:function(t,n){1&t&&(o.F$t(),o.TgZ(0,"span",0),o.Hsn(1),o.qZA()),2&t&&(o.Gre("state-",n.state,""),o.Udp("background-color",n.bgcolor),o.Q6J("ngClass",n.innerClass)("ngStyle",n.innerStyle))},dependencies:[l.mk,l.PC],styles:["[_nghost-%COMP%] > span[_ngcontent-%COMP%]{display:block;position:relative;padding:.5em;color:var(--color-fg);background:var(--color-bg);background:white;border-radius:.5em;box-shadow:.1em .1em .25em var(--color-dark-op-10);border:.1em solid var(--color-fg-op-50);transition:.2s;transition-property:transform,box-shadow,background}[_nghost-%COMP%] > span.state-idle[_ngcontent-%COMP%], [_nghost-%COMP%] > span.state-hover[_ngcontent-%COMP%]{background:lightyellow}[_nghost-%COMP%] > span.state-hover[_ngcontent-%COMP%]{transform:scale(1.15)}[_nghost-%COMP%] > span.state-wrong[_ngcontent-%COMP%]{background:salmon!important;animation:.5s .2s _ngcontent-%COMP%_wrong ease-in-out 1}[_nghost-%COMP%] > span.state-correct[_ngcontent-%COMP%]{background:palegreen!important;animation:1.5s .1s _ngcontent-%COMP%_correct ease-in-out 1 forwards}@keyframes _ngcontent-%COMP%_wrong{0%,to{transform:translate(0)}15%,45%,75%{transform:translate(-.5em)}30%,60%,90%{transform:translate(.5em)}}@keyframes _ngcontent-%COMP%_correct{0%,10%,30%,50%{transform:scale(1)}20%,40%{transform:scale(1.15)}0%,80%{opacity:1}to{opacity:.5}}"]})}var y=i(2340);function tt(r,e){if(1&r){const t=o.EpF();o.TgZ(0,"div",5),o.NdJ("cdkDragDropped",function(s){o.CHM(t);const a=o.oxw(2);return o.KtG(a.onDragDrop(s))}),o.TgZ(1,"app-word",6),o._uU(2),o.qZA()()}if(2&r){const t=o.oxw().ngIf,n=o.oxw();o.Q6J("cdkDragData",t.currWord),o.xp6(2),o.hij(" ",n.formatWord(t.currWord,!0)," ")}}function et(r,e){if(1&r){const t=o.EpF();o.TgZ(0,"div",7),o.NdJ("cdkDropListEntered",function(s){o.CHM(t);const a=o.oxw(2);return o.KtG(a.onDragEnter(s))})("cdkDropListExited",function(){o.CHM(t);const s=o.oxw(2);return o.KtG(s.reset())}),o.TgZ(1,"app-word",8),o._uU(2),o.qZA()()}if(2&r){const t=e.$implicit,n=o.oxw().ngIf,s=o.oxw();o.Q6J("cdkDropListDisabled",t.done)("cdkDropListData",t),o.xp6(1),o.Q6J("state",s.wordState(t,n.hoveredWord,n.wrongWord)),o.xp6(1),o.hij(" ",s.formatWord(t.word,!1)," ")}}function ot(r,e){if(1&r&&(o.TgZ(0,"div",1)(1,"main",2),o.YNc(2,tt,3,2,"div",3),o.qZA(),o.TgZ(3,"aside"),o.YNc(4,et,3,4,"div",4),o.qZA()()),2&r){const t=e.ngIf,n=o.oxw();o.xp6(2),o.Q6J("ngIf",t.currWord),o.xp6(2),o.Q6J("ngForOf",t.wordsStatus)("ngForTrackBy",n.trackByWord)}}class f{constructor(e){this.game=e,this.wordsDone$=new m.X([]),this.wordsStatus$=(0,D.a)([this.game.words$,this.wordsDone$]).pipe((0,d.U)(([t,n])=>t.map(s=>({word:s,done:n.includes(s)})))),this.wordsLeft$=this.wordsStatus$.pipe((0,d.U)(t=>t.filter(n=>!n.done).map(n=>n.word))),this.currWord$=this.wordsLeft$.pipe((0,d.U)(t=>t[Math.floor(Math.random()*t.length)])),this.hoveredWord$=new m.X(void 0),this.wrongWord$=new m.X(void 0),this.$$=(0,D.a)([this.wordsStatus$,this.currWord$,this.hoveredWord$,this.wrongWord$]).pipe((0,d.U)(([t,n,s,a])=>({wordsStatus:t,currWord:n,hoveredWord:s,wrongWord:a})))}trackByWord(e,t){return t.word}formatWord(e,t){return e[t?"toLocaleUpperCase":"toLocaleLowerCase"]()}addWordDone(e){this.wordsDone$.next([...this.wordsDone$.value,e])}reset(){this.hoveredWord$.next(void 0),this.wrongWord$.next(void 0)}onDragDrop(e){var t=this;return(0,V.Z)(function*(){e.item.data===e.container.data?.word?t.addWordDone(e.item.data):(t.reset(),t.wrongWord$.next(e.container.data?.word),clearTimeout(t._aniTimer),t._aniTimer=setTimeout(()=>t.reset(),1200))})()}onDragEnter(e){this.reset(),this.hoveredWord$.next(e.container.data.word)}wordState(e,t,n){return e.done?c.Correct:t===e.word?c.Hover:n===e.word?c.Wrong:c.Idle}static#t=this.\u0275fac=function(t){return new(t||f)(o.Y36(p))};static#e=this.\u0275cmp=o.Xpm({type:f,selectors:[["app-map-lower-upper-words"]],decls:2,vars:3,consts:[["cdkDropListGroup","","class","wrapper full-fill bg-op-5",4,"ngIf"],["cdkDropListGroup","",1,"wrapper","full-fill","bg-op-5"],["cdkDropList","",1,"flex-center"],["class","p-1","cdkDrag","",3,"cdkDragData","cdkDragDropped",4,"ngIf"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListData","cdkDropListEntered","cdkDropListExited",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"p-1",3,"cdkDragData","cdkDragDropped"],["bgcolor","var(--color-primary-light-2)","innerClass","px-1 ts-120p"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListData","cdkDropListEntered","cdkDropListExited"],[3,"state"]],template:function(t,n){1&t&&(o.YNc(0,ot,5,3,"div",0),o.ALo(1,"async")),2&t&&o.Q6J("ngIf",o.lcZ(1,1,n.$$))},dependencies:[l.sg,l.O5,y.Wj,y.Fd,y.Zt,g,l.Ov],styles:[".wrapper[_ngcontent-%COMP%]{display:grid;grid-template:auto/auto minmax(10em,30%)}@media (orientation: portrait){.wrapper[_ngcontent-%COMP%]{grid-template:8em auto/auto}}.wrapper[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{display:grid;grid-template:auto/auto;align-items:center;overflow:auto;gap:.5em;padding:1em}@media (orientation: portrait){.wrapper[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{grid-template:auto/repeat(2,calc(50% - .25em))}}.cdk-drag-placeholder[_ngcontent-%COMP%]{display:none}"]})}var u=(()=>((u||(u={})).MapLowerUpperWords="map-lower-upper-words",u))(),rt=i(1929);const nt=[{path:":wordsetIndex",component:w,children:[{path:u.MapLowerUpperWords,component:f},{path:"**",redirectTo:u.MapLowerUpperWords}]}];class h{static#t=this.\u0275fac=function(t){return new(t||h)};static#e=this.\u0275mod=o.oAB({type:h});static#o=this.\u0275inj=o.cJS({providers:[p],imports:[l.ez,v.Bz.forChild(nt),rt.q]})}}}]);